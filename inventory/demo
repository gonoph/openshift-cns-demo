# vim: filetype=dosini

[rhel:vars]
ansible_user=ec2-user
private_ip_start=10
private_ip={{ ec2_vpc_subnet_cidr_block | ipaddr(private_ip_start + groups['ec2'].index(inventory_hostname)) | ipaddr('address') }}
rhel_extras_repo=rhui-REGION-rhel-server-extras

[ocp:vars]
ec2_instance_type=m4.large

[dns:vars]
ec2_instance_type=t2.micro
ec2_volumes='[{"volume_size": 10, "delete_on_termination": true, "volume_type": "gp2", "device_name": "{{ ec2_drive_map.0 }}"}]'
docker_storage_dev=''

[ec2:vars]
# the following is RHEL 7.4 in us-east-1 via Cloud Access
ec2_ami_image=ami-7a96b801
# the following is RHEL Atomic 7.4 in us-east-1 via Cloud Access (recommended)
# ec2_ami_image=ami-ac910ed6
ec2_mynetworks=[ "108.247.233.239/32" ]
# subnet will be picked from 1st subnet found in VPC if not defined
# ec2_vpc_subnet=subnet-ffffffff
# if you only have one VPC, then it will be selected, otherwise, define it here
# ec2_vpc_id=vpc-fffffff

[dns]
dns.example.com

[ocp]
master.example.com
node[1:2].example.com

[rhel:children]
ec2

[ec2:children]
ocp
dns

[OSEv3:children]
nodes
masters
etcd
rhel
# lb

[OSEv3:vars]
openshift_release=v3.6.1
openshift_deployment_type=origin
openshift_disable_check=memory_availability,disk_availability
containerized=True
openshift_hostname={{ inventory_hostname }}

# will test this later
# openshift_cloudprovider_kind=aws
# openshift_cloudprovider_aws_access_key={{ aws_access_key }}
# openshift_cloudprovider_aws_secret_key={{ aws_secret_key }}
# if defning the above, then comment out below
openshift_master_ingress_ip_network_cidr=172.250.0.0/16

openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]
# admin: adminuser123
# demo: demouser123
openshift_master_htpasswd_users={'admin': '$apr1$slD.7Idv$RU9uQTc6xffBM8qaA4sSH/', 'demo': '$apr1$3Rp7gLp6$L6jBaTQtJ6zLuEJ85Pb9N0'}

# openshift_master_cluster_method=native
# openshift_master_cluster_hostname=ocp.example.com
# openshift_master_cluster_public_hostname=ocp.example.com
openshift_master_default_subdomain=apps.example.com

openshift_clock_enabled=True

openshift_hosted_metrics_deploy=True
openshift_hosted_logging_deploy=True
# openshift_logging_kibana_proxy_debug=True

openshift_hosted_logging_hostname=kibana.apps.example.com
openshift_master_logging_public_url=https://kibana.apps.example.com

openshift_schedulable=True
openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
openshift_ip={{ internal_ip }}
openshift_public_ip={{ ansible_host }}

# XXX don't really need this
# openshift_dns_ip=172.200.0.1
openshift_portal_net=172.200.0.0/16

[masters]
master.example.com

[etcd]
master.example.com

[nodes]
master.example.com
node[1:2].example.com
